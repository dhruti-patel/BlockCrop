<! DOCTYPE html>
<html lang=”en”>
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <meta http-equiv="X-UA-Compatible" content="ie=edge">
 <title>Dashboard</title>
<link rel="stylesheet" type="text/css" href="./css/file.css">
<!--<script src="./node_modules/web3/dist/web3.min.js"></script>-->
<!--<link href='./bootstrap.min.css' rel='stylesheet' type='text/css'>-->
<link href="./css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
  
 <div class="container" style="width:100%">
     <h1 style="margin-left: 10px;">Search and Buy Lots</h1>
     <div class="row" style="margin-left: 10px;">
         <input class="search" placeholder="Search for a crop">
         <input type="button" class="searchbutton" value="Search"></input>
     </div>
       
   <script>
   var obj = [{
   "crop": "wheat",
   "quantity":"5kg",
   "price":"5 ether",
   "pdate":"22/2/2020",
   "expdate":"24/5/2020",
   "buyer":"narayan"
},{
   "crop": "Bajari",
   "quantity":"5kg",
   "price":"7 ether",
   "pdate":"22-2-2020",
   "expdate":"24-1-2020",
   "buyer":"anushree"
}];

var globalCounter = 0;
var tbody = document.getElementById('tbody');
var tr='';
var lasti=0;
var buttonstyle='';
for (var i = 0; i < Object.keys(obj).length; i++) {
    var x =obj[i].expdate;
    var a = x.split('-');
    var date = new Date (a[2], a[1] - 1,a[0]);//using a[1]-1 since Date object has month from 0-11
    var Today = new Date();
    if (date > Today)
       { //alert("great"); 
        buttonstyle="grey";
        console.log("greyed");
        }
    else{
        buttonstyle='';
    }
   if(i%3===0)
   {tr=tr+'<div class="row">';
   lasti=i;
   }
   tr = tr+'<div class="col-lg-3">';
   tr += '<div class="lotbox"  >'+"<label>" +"Crop: "+ obj[i].crop+"</label>"+"<br>"
       +"<label>" +"Quantity: "+obj[i].quantity + "</label>"+"<br>"
       +"<label>" + "Price: "+obj[i].price + "</label>"+"<br>"
       +"<label>" + "Produce Date: " +obj[i].pdate + "</label>"+"<br>"
       +"<label>" + "Expiry Date:"+obj[i].expdate + "</label>"+"<br>"
       +"<label>" + "Buyer: "+obj[i].buyer + "</label>"+'<br>'+'<button class="btn btn-primary buttonstyle" style="float:right">'+"Order"+"</button>"+"</div>"+"</div>";
   if(i-2===lasti)
   {tr=tr+'</div>'}
}

tbody.innerHTML += tr;


// document.getElementById('dbox').classList.add('lotbox');
// document.getElementById('dcol').classList.add('col-lg-3');
// document.getElementBtId('drow').classList.add('row');
   </script>
</div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<!--<script src="http
    s://code.jquery.com/jquery-3.2.1.slim.min.js"></script>-->
<script src="./js/bootstrap.min.js"></script>
<!--<script src="./js/web3.min.js"></script>-->
<script src="./js/truffle-contract.js"></script>
<script src="./js/app.js"></script>
</body>
</html>